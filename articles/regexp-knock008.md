---
title: "正規表現10本ノック8本目" # 記事のタイトル
emoji: "📝" # アイキャッチとして使われる絵文字（1文字だけ）
type: "tech" # tech: 技術記事 / idea: アイデア記事
topics: [regexp] # タグ。["markdown", "rust", "aws"]のように指定する
published: true # 公開設定（falseにすると下書き）
---
# 出題：正規表現10本ノック8本目(メタ文字 `[]`)

## 背景

あなたはプログラマです。もうこのくだりは飽きましたね。

```vb
  Dim foo as Long
  Dim bar as Long
  Dim baz as Long
```

## お題
以下の文字列のうち、○の文字列にマッチして×の文字列にマッチしない正規表現を考えてください。
（冒頭の背景のことは無視してください。置換のことは考えなくて良いです)

    ○: foo
    ○: bar
    ○: baz
    ○: Dim
    ○: as
    ○: Long
    ×: _  (半角空白)

使用する正規表現の条件:
  * 文字数の目安: 9文字(メタ文字 `[ ]`、`+` を使用)
  * 中級者向けの制限: 5文字(メタ文字 `[^ ]`、`+` を使用)
  * 中級者向けの制限: 3文字(メタ文字 `[ ]` を使用しない)

## 回答と解説

:::details 回答
`[A-Za-z]+`
:::

:::details 回答(中級者向け1)
`[^ ]+`
:::

:::details 回答(中級者向け2)
`\w+`
:::

:::details 解説
メタ文字 `.` があらゆる1文字を表すのに対して、メタ文字 `[]` を使ってマッチする文字の種類を限定できます。たとえば、`[abc]` は、`a`, `b`, `c` のいずれか1文字を表します。

正規表現: `[abc]`
マッチする文字列: `a` または `b` または `c`

正規表現: `[abc]+`
マッチする文字列: `a`, `aa`, `abc`, `abcabc`, `aaaaaa` など、`a` または `b` または `c` いずれかの繰り返し(`+`の「直前の正規表現」は `[abc]`です)

`[]`の表現は常にそれが1文字を表すということを覚えておいてください。
:::

:::details 解説2
文字の範囲指定

`[abc]` は `-` を使って、`[a-c]` と表すことができます。たとえば、`[a-z]` は「aからz」、つまり小文字のアルファベットのいずれか1文字を表します。`[a-zA-Z]`は「aからzとAからZ」、つまり文字の大小に限らずアルファベットの1文字を表します。
`[a-zA-Z0-9_]`などはプログラムの変数名に使われる文字としてよく登場します。
そして、`[a-zA-Z0-9_]`はその別表現としてメタ文字 `\w` が用意されています。この2つは同じ意味です。
:::

:::details 解説3
`[]`で表す正規表現のことを「文字クラス」と呼びます。ある文字の集合であることを意味した言葉です。そして、`[]`内は通常の正規表現とは文字の解釈が異なります。たとえば、`*`, `+`, `.` など正規表現の特別な意味は文字クラスの内では普通の文字として解釈されます。`[]`で特別な意味のある文字は `-` やエスケープ文字 `\` そして `^` だけです。(TODO: ここ他にないか？確認)
:::

<!-- TODO: 文字クラスに関するルールとしてもっと色々書きたいことはあるがそこはノックの範囲を超えるものと判断して省略。上記ももっと要点を絞った方がいい？ -->
