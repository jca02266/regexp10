# 出題：正規表現10本ノック6本目(メタ文字"()")

## 背景

あなたはプログラマです。あきもせず何もしないプログラムを見ています。そして気づきます。また壊れてる・・・

```vb
  Dim foo as Long
  Dim babababar as Long
  Dim babababaz as Long
```

## お題
以下の文字列のうち、○にマッチして×の文字列にマッチしない正規表現を考えてください。
（冒頭の背景のことは無視してください。置換のことは考えなくて良いです)

    ×: foo
    ○: babababar
    ○: babababaz
    ×: r
    ×: z

  正規表現：___

  * 文字数の目安: 10文字(メタ文字 (), +, | を使用)   <!-- (ba)+(r|z) -->

## 解説

前回、ノック004で繰り返しを学びました。そこで + や * は「直前の正規表現」を繰り返すと説明しました。改めてこの意味を説明します。

foo* と書いた時は f o o * の中の o と隣あう \* の優先順位が高いことになっています。
算数で言うと fo(o*) と言う意味になります。この算数で言う()の使い方が正規表現でも使えます。 fo(o\*) は正しい正規表現で、foo\* と実質同じ意味になっています。

では、(fo)o\*と書くとどうなるでしょうか？これは(fo)(o\*)と同じで、foo*とも同じです。

では、(f)oo\*と書くとどうなるでしょうか？これもfoo\*と同じで、foo*とも同じです。

では、(foo)\*と書くとどうなるでしょうか？これは \* が指す「直前の正規表現」が
foo であるという意味になります。つまり、(foo)* は

* 空文字列 (fooの0回の繰り返し)
* foo  (foo1回の繰り返し)
* foofoo  (foo2回の繰り返し)
* foofoofoo  (foo3回の繰り返し)

にマッチする正規表現となります。

優先順位の話を続けます。今まで、bar|baz と言う正規表現を使っていました。
これは()で優先順位を明記すると、(bar)|(baz) の意味になります。
メタ文字 | の優先順位は文字の並び bar などよりも低いと言えます。

まとめると、正規表現の優先順位は括弧を使わない場合、

    繰り返し(*や+) > 文字の並び(連接と言います) > 選択(|)

の順番になっています。bar|baz を ba(r|b)az と変更するとこれは、baraz または babaz のいずれかにマッチする正規表現に意味が変わります。優先順位の解釈は正規表現を書く上で大事なことです。

改めて、() は正規表現の優先順位を変更するためのメタ文字です。また、()で正規表現を囲むことをグルーピングと言います。グルーピングには優先順位の変更以外にも役割がありますが、それは今後の課題にします。

これらを応用して問題を解いてみてください。
(ba)+(r|z)

すぐには理解しにくくなってきました。
